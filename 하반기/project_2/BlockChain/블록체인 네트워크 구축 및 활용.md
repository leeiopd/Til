# 블록체인 네트워크 구축 및 활용



## 1. 프로젝트 개요

- 1주차 프로젝트는 2주차부터 진행할 `블록체인 기반 P2P 경매 시스템` 개발 프로젝트를 진행하기 위한 기반 지식을 습득하는 과정에 해당
- P2P 경매 시스템은 사용자가 시스템에 등록한 자산인 디지털 작품을 경매를 통해 판매하고 그 소유권을 이전하는 기능을 갖는다.
- 해당 시스템에서 `경매 기능`은 서버를 거치지 않고 이더리움 스마트 컨트랙트를 통해 직접 진행
- 해당 시스템은 디지털 작품의 `소유권`을 프라이빗 혹은 허가형 블록체인의 대표격인 하이퍼레져 패브릭에 기록하는 기능을 지님.
- 시스템을 통해 작품 등록, 삭제. 경매 완료 등 소유권에 변경이 발생하는 이벤트가 있을 때 체인코드를 출력하여 소유권 이력을 기록하게 됩니다.



### 1.1. 이더리움 프로젝트 개요

* **대표적 비허가형 블록체인이자 블록체인 2.0으로 지칭되는 이더리움의 블록체인 익스프로러 제작**

* **이더리움의 특징**

  1. 스마트 컨트렉트의 기능을 새롭게 확장하여 적용한 블록체인 플랫폼
     * 스마트 컨트랙트만을 위한 언어 - Solidity, LLL 등 을 개발
     * 가상머신 (EVM, Etherieum Virtual Machine) 제작
     * 암호 해시 함수로 SHA 계열이 아닌 ASIC 사용
     * 채굴의 중앙화를 해소하기 위하여 Ethash 라는 KECCACK 기반의 해시 알고리즘 사용하여 개발
  2. MPT - Modified Merkle Patricia Trie : 트랜젝션 데이터의 위변조 감지 및 스마트 컨트렉트 관련 상태 정보를 저장, 관리하기 위한 기술
     * 1 세대 블록체인에서는 해시값들의 트리인 머클 트리(Merkle Tree)를 이용하여 트랜젝션들의 위변조 혹은 변조 여부를 감지하는데 사용
     * 이더리움에서는 머클 트리를 Patricia Trie와 접목시킨 MPT를 사용하여 key-value 형식으로 저장하여 관리
  3. 암호화폐 관리기술의 차이
     * 비트코인의 경우 `소비되지 않은 거래 출력(잔액)` - UTXO(Unspent Transaction Output) 기반
     * 이더리움의 경우 `사용자 계정` 에 기반하여 암호화폐를 관리, 사용자 중심

* **기술 스택 및 툴의 특징**

  1. VirtualBox

     * 가상화를 위한 소프트웨어
     * 가상화(Virtualizationi) - 소프트웨어를 하드웨어로부터 독립시켜 구동할 수 있는 기술
     * 종류
       1. 하드웨어 가상화(Hypervisor)
       2. OS 수준 가상화
       3. 데스크톱 가상화 등

  2. Vagrant

     * 가상머신 프로비저닝(Provisioning) 도구
     * 간단한 스크립트 작성으로 다양한 가상머신을 쉽게 생성, 수정, 삭제 등 관리 가능
     * `프로비저닝` - 사용자의 요구에 맞게 미리 시스템 자원을 정의하고 할당 및 배포 하였다가 필요 시 시스템을 즉시 사용할 수 있도록 준비해두는 것

  3. Geth

     * 이러디움 클라이언트 중 `Go` 언어로 개발된 버전
     * 이더리움의 공식 프로그램으로 내부 기능과 프로토콜을 완벽히 준수하며 가장 널리 사용되는 이더리움 클라이언트

  4. Solidity

     * 이더리움에서 개발한 스마트 컨트랙트 개발 언어
     * 가장 널리 사용되는 언어
     * 솔리디티 스마트 컨트랙트는 컴파일러를 통해 바이트코드로 변환되어 이더리움 가상 머신 위에서 동작
     * `Turing-Complete` - 어떤 프로그래밍 언어나 추상 기계가 튜링 기계와 동일한 계산 능력을 짐, 계산적 문제를 그 프로그래밍 언어로 풀수 있다는 의미
       * `튜링 기계` - 적당한 규칙과 기호를 입력한다면 일반적인 컴퓨터의 알고리즘을 수행 할 수 있음

  5. Remix

     * 브라우저 상에서 이용가능한 이더리움 스마트 컨트래트 개발 도구
     * 다양한 버전의 `Solidity` 버전 컴파일 가능
     * `javascript VM` 을 통한 스마트 컨트랙트의 사전 테스트, 테스트넷 과의 연동을 통한 배포 및 호출 등을 쉽게 진행 가능
     * 스마트 컨트랙트에 소요되는 Gas를 미리 예상해 볼 수 있고 UI를 통한 손쉬운 호출로 이더리움 스마트 컨트랙트 개발에 용의

     

### 1.2. 하이퍼레저 패브릭 프로젝트 개요

* 대표적 허가형 블록체인(Permissioned Blockchain)이자 기업형 블록체인 솔루션으로 가장 널리 알려진 하이퍼레저 패브릭(Hyperledger Fabric) 네트워크 구축
* 체인코드 작성, 배포
* `패브릭 네트워크` - 기업형 블록체인의 대표주자로 기업 간 시너지를 이끌어내기 위한 블록체인 인프라
  * 비독점적인 이해 당사자들이 모여 하나의 컨소시엄을 구성
  * 네트워크에 진입하기 위한 다양한 인증절차가 존재하며 이를 통과한 참여자만이 허가형 블록체인에 참여 할 수 있음
  * 인증절차를 통해 구성된 네트워크를 패브릭에서는 `비즈니스 네트워크`라고 함
  * 인증절차에 의해 신뢰가 보장된 구성원을 가지기 때문에 `합의` 과정이 축소되어 `정렬 서비스 (Ordering Service)` 라 칭하며 빠른 거래 검증 및 블록생성을 지원
* **기술 스택 및 툴의 특징**
  1. 카프카(Kafka)
     * 분산 메시징, 메시지 큐 기술의 일정
     * 최근 넷플릭스, 트위터, 텀블러 등 실시간으로 대용량의 메세지 및 데이터 처리가 필요한 서비스에 중요한 기술 중 하나로 사용됨
     * 패브릭 네트워크에서는 오더링 서비스에 적용하여 사용
     * `발행 - 구독 (Publish-Subscribe)` 모델 사용
       * 발행자(Publisher)가 메시지를 큐에 기록
       * 참여자(Subscriber)는 큐에서 메시지를 가져옴
  2. Docker, Docker-compose
     * 소프트웨어 컨테이너 기술을 기반으로 하는 OS수준 가상화 프로그램
     * 가장 큰 특장점은 가상화로 동작하는 소프트웨어 프로세스를 OS 및 다른 어플리케이션으로 부터 격리시켜 구동한다는 점
     * 확장성 및 자원관리에 탁월한 성능을 발휘
     * `Docker-compose` - 다중 도커 컨테이터를 실행하고 관리하기 위한 도구

